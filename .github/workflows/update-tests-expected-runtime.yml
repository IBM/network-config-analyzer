name: update-tests-expected-runtime

on:
  # push is only for testing
  push:
    branches:
      - issue_134_b_mechanism_to_update_run_time
  workflow_dispatch:

jobs:
  changedfiles:
    runs-on: ubuntu-latest
    outputs:
      changed_tests: ${{ steps.changes.outputs.changed_tests}}
    steps:
      - uses: actions/checkout@v2
      - uses: ./.github/actions/setup-nca-env
      - name: get added or modified tests
        id: changes
        run: |
          echo "::set-output name=changed_tests::$(git diff  --name-only --diff-filter=AM tests ${{ github.event.pull_request.base.sha }} ${{ github.sha }})"
  lint:
    runs-on: ubuntu-latest
    needs: changedfiles
    if: ${{needs.changedfiles.outputs.changed_tests}}
    steps:
      - name: echo changed tests
        run: echo ${{needs.changedfiles.outputs.changed_tests}}